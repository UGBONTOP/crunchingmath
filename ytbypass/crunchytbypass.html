<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stealth Flux</title>
    <style>
        body { background: #000; color: #555; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        #portal { width: 854px; height: 480px; background: #050505; border: 1px solid #111; position: relative; }
        .ui { margin-bottom: 20px; opacity: 0.2; transition: 0.3s; }
        .ui:hover { opacity: 1; }
        input { background: #111; border: 1px solid #222; color: #eee; padding: 10px; width: 250px; outline: none; }
        button { background: #222; color: #fff; border: 1px solid #333; padding: 10px; cursor: pointer; }
    </style>
</head>
<body>

    <div class="ui">
        <input type="text" id="v_id" placeholder="ID Only (e.g. dQw4w9WgXcQ)">
        <button id="v_go">Inject</button>
    </div>

    <div id="portal"></div>

    <script>
        (function() {
            // Obfuscated parts: "https://", "www.youtube-nocookie.com/embed/"
            const _h = "aHR0cHM6Ly8="; // https://
            const _d = "d3d3LnlvdXR1YmUtbm9jb29raWUuY29tL2VtYmVkLw=="; // www.youtube-nocookie.com/embed/

            const go = document.getElementById('v_go');
            const portal = document.getElementById('portal');

            go.addEventListener('click', () => {
                const id = document.getElementById('v_id').value.trim();
                if (id.length === 11) {
                    process(id);
                }
            });

            function process(id) {
                portal.innerHTML = '';
                
                // Construct the source purely in-memory using Base64 decoding
                const target = atob(_h) + atob(_d) + id + "?autoplay=1&rel=0";

                // Create a 'Closed' Shadow DOM so extensions can't see inside
                const shadow = portal.attachShadow({ mode: 'closed' });

                // INSTEAD OF AN IFRAME: Use a generic <object> tag.
                // Many extensions don't scan 'data' attributes of objects for video URLs.
                const obj = document.createElement('object');
                
                // Hide the type from standard video-sniffers
                obj.setAttribute('type', 'text/html'); 
                obj.setAttribute('data', target);
                
                obj.style.width = '100%';
                obj.style.height = '100%';

                // Force a neutral referrer policy to satisfy YouTube's 153 check
                // while keeping the origin hidden from extensions.
                obj.setAttribute('referrerpolicy', 'no-referrer-when-downgrade');

                // Block event bubbling to prevent extensions from "hearing" the player load
                obj.addEventListener('load', (e) => e.stopPropagation(), true);

                shadow.appendChild(obj);
            }
        })();
    </script>
</body>
</html>