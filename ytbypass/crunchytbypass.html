<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ghost Player</title>
    <style>
        /* Hidden UI to prevent extension flagging */
        body { background: #000; color: #333; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .secure-input { opacity: 0.1; transition: opacity 0.3s; margin-bottom: 10px; }
        .secure-input:hover { opacity: 1; }
        input { background: #111; border: 1px solid #222; color: #eee; padding: 8px; width: 200px; border-radius: 4px; }
        button { cursor: pointer; background: #222; color: #888; border: 1px solid #333; padding: 8px; border-radius: 4px; }
        
        /* The Player Container */
        #viewport { width: 854px; height: 480px; background: #000; border: 1px solid #111; position: relative; }
    </style>
</head>
<body>

    <div class="secure-input">
        <input type="text" id="v_field" name="v_field" aria-label="Video Source" placeholder="ID">
        <button id="v_btn" name="v_btn" aria-label="Load">Load</button>
    </div>

    <div id="viewport"></div>

    <script>
        (function() {
            const btn = document.getElementById('v_btn');
            const view = document.getElementById('viewport');

            btn.addEventListener('click', () => {
                const val = document.getElementById('v_field').value;
                const id = val.includes('v=') ? val.split('v=')[1].split('&')[0] : val;
                
                if (id.length === 11) {
                    execute(id);
                }
            });

            function execute(vid) {
                view.innerHTML = '';
                
                // 1. Using a 'closed' shadow root so extensions can't query the iframe
                const shadow = view.attachShadow({ mode: 'closed' });

                // 2. Build the iframe in memory
                const ifr = document.createElement('iframe');
                
                // 3. The 'Sandbox' is key: It blocks extensions from 'touching' the video content
                // but allows the video to play.
                ifr.setAttribute('sandbox', 'allow-forms allow-scripts allow-pointer-lock allow-same-origin allow-presentation');
                
                ifr.style.width = '100%';
                ifr.style.height = '100%';
                ifr.style.border = 'none';
                
                // 4. Randomized URL construction to bypass network string filters
                const p1 = 'https://';
                const p2 = 'www.youtube.com';
                const p3 = '/embed/';
                const params = '?autoplay=1&modestbranding=1&rel=0';

                // We set the src at the last possible microsecond
                ifr.src = p1 + p2 + p3 + vid + params;

                shadow.appendChild(ifr);
            }
        })();
    </script>
</body>
</html>