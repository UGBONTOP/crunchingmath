<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core System</title>
    <style>
        body { background: #000; color: #111; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .ui { background: #080808; padding: 25px; border-radius: 12px; border: 1px solid #111; margin-bottom: 20px; transition: 0.5s; opacity: 0.03; }
        .ui:hover { opacity: 1; border-color: #222; }
        input { background: #000; border: 1px solid #222; color: #0f0; padding: 12px; width: 240px; border-radius: 6px; outline: none; }
        button { background: #111; color: #444; border: 1px solid #222; padding: 12px 24px; border-radius: 6px; cursor: pointer; }
        #v-portal { width: 854px; height: 480px; background: #000; border: 1px solid #050505; position: relative; }
    </style>
</head>
<body>

    <div class="ui">
        <input type="text" id="target_id" placeholder="Paste ID">
        <button id="v_run">Engage</button>
    </div>

    <div id="v-portal"></div>

    <script>
        (function() {
            const btn = document.getElementById('v_run');
            const portal = document.getElementById('v-portal');

            // This is the EXACT mathematical map for "https://www.youtube-nocookie.com/embed/"
            // No strings exist here, just coordinates.
            const _MAP = [104, 116, 116, 112, 115, 58, 47, 47, 119, 119, 119, 46, 121, 111, 117, 116, 117, 98, 101, 45, 110, 111, 99, 111, 111, 107, 105, 101, 46, 99, 111, 109, 47, 101, 109, 98, 101, 100, 47];
            
            btn.addEventListener('click', () => {
                const input = document.getElementById('target_id').value;
                const id = input.length > 11 ? input.match(/[a-zA-Z0-9_-]{11}/)[0] : input;
                
                if (id && id.length === 11) {
                    assemble(id);
                }
            });

            function assemble(vid) {
                portal.innerHTML = '';
                
                // Reconstruct the URL character by character at the moment of the click
                let d = "";
                for(let i=0; i<_MAP.length; i++) {
                    d += String.fromCharCode(_MAP[i]);
                }
                
                // Add a timestamp to the URL to confuse network caches used by extensions
                const final = d + vid + "?autoplay=1&rel=0&t=" + Date.now();

                const root = portal.attachShadow({ mode: 'closed' });

                // Using <embed> instead of <iframe> to bypass standard Chromebook filters
                const el = document.createElement('embed');
                el.setAttribute('type', 'text/html');
                el.setAttribute('src', final);
                el.style.width = '100%';
                el.style.height = '100%';
                
                // This handshake is required to prevent "Error 153"
                el.setAttribute('referrerpolicy', 'no-referrer-when-downgrade');

                // Stop extensions from sniffing the load event
                el.addEventListener('load', (e) => e.stopPropagation(), true);

                root.appendChild(el);
            }
        })();
    </script>
</body>
</html>