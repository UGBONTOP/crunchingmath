<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000">
    <title>Desmos Learning | Crunchmath.org </title>
    <link rel="icon" type="image/png" href="images/crunchmathfr.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           CRUNCH GLASS OS - DESIGN SYSTEM 2.0
           ========================================= */

        :root {
            /* CORE COLORS (Default) */
            --bg-deep: #050505;
            --accent-primary: #7c3aed; /* Violet */
            --accent-secondary: #2563eb; /* Blue */
            --accent-glow: rgba(124, 58, 237, 0.6);
            
            /* TEXT */
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            
            /* GLASS VARIABLES */
            --glass-base: rgba(20, 20, 20, 0.6);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.15);
            --glass-blur: blur(24px);
            
            /* DIMENSIONS */
            --sidebar-width: 80px;
            --card-radius: 24px;
            
            /* FONTS */
            --font-display: 'Outfit', sans-serif;
            --font-body: 'Space Grotesk', sans-serif;
        }

        /* --- THEME DEFINITIONS --- */

        /* Light Mode */
        body.theme-light {
            --bg-deep: #f3f4f6;
            --accent-primary: #2563eb;
            --accent-secondary: #0ea5e9;
            --accent-glow: rgba(37, 99, 235, 0.4);
            --text-main: #111827;
            --text-muted: #4b5563;
            --glass-base: rgba(255, 255, 255, 0.65);
            --glass-border: rgba(0, 0, 0, 0.05);
            --glass-highlight: rgba(0, 0, 0, 0.1);
        }

        /* Midnight Blue */
        body.theme-midnight {
            --bg-deep: #020617;
            --accent-primary: #38bdf8;
            --accent-secondary: #1e40af;
            --accent-glow: rgba(56, 189, 248, 0.5);
            --glass-base: rgba(15, 23, 42, 0.7);
        }

        /* Forest Green */
        body.theme-forest {
            --bg-deep: #022c22;
            --accent-primary: #10b981;
            --accent-secondary: #047857;
            --accent-glow: rgba(16, 185, 129, 0.5);
            --glass-base: rgba(6, 78, 59, 0.6);
        }

        /* Sunrise (Orange) */
        body.theme-sunrise {
            --bg-deep: #2a1b15;
            --accent-primary: #fb923c;
            --accent-secondary: #c2410c;
            --accent-glow: rgba(251, 146, 60, 0.5);
            --glass-base: rgba(67, 20, 7, 0.6);
        }

        /* Magma (Red) */
        body.theme-magma {
            --bg-deep: #1a0505;
            --accent-primary: #ef4444;
            --accent-secondary: #991b1b;
            --accent-glow: rgba(239, 68, 68, 0.5);
            --glass-base: rgba(69, 10, 10, 0.6);
        }

        /* Cyberpunk (Yellow/Neon) */
        body.theme-cyberpunk {
            --bg-deep: #0a0a00;
            --accent-primary: #eab308; /* Yellow */
            --accent-secondary: #facc15;
            --accent-glow: rgba(234, 179, 8, 0.6);
            --glass-base: rgba(20, 20, 0, 0.7);
            --glass-border: rgba(255, 255, 0, 0.15);
        }

        /* Vaporwave (Pink/Cyan) */
        body.theme-vaporwave {
            --bg-deep: #12001f;
            --accent-primary: #d946ef; /* Magenta */
            --accent-secondary: #06b6d4; /* Cyan */
            --accent-glow: rgba(217, 70, 239, 0.6);
            --glass-base: rgba(40, 0, 60, 0.6);
        }

        /* Dracula (Purple/Dark) */
        body.theme-dracula {
            --bg-deep: #0b0a14;
            --accent-primary: #a855f7;
            --accent-secondary: #ff5555;
            --accent-glow: rgba(168, 85, 247, 0.5);
            --glass-base: rgba(30, 20, 50, 0.6);
        }


        /* GLOBAL RESET */
        *, *::before, *::after {
            box-sizing: border-box;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        input, textarea { user-select: text; }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: var(--font-body);
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* GLOW EFFECTS */
        body.enable-glow .action-card:hover {
            box-shadow: 0 0 25px var(--accent-glow), inset 0 0 10px rgba(255,255,255,0.1);
            border-color: var(--accent-primary);
        }
        
        body.enable-glow .nav-item:hover {
            text-shadow: 0 0 10px var(--accent-primary);
            box-shadow: 0 0 15px rgba(255,255,255,0.1);
        }

        body.enable-glow .game-card:hover {
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), 0 0 30px var(--accent-glow);
            border-color: var(--accent-primary);
        }

        body.enable-glow .btn-pri:hover {
            box-shadow: 0 0 25px var(--accent-glow);
        }

        body.enable-glow .brand-icon:hover {
             box-shadow: 0 0 30px var(--accent-primary);
        }

        /* BACKGROUND ELEMENTS */
        #bgCanvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            opacity: 0.8;
            transition: opacity 0.5s ease;
        }

        .ui-noise {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            z-index: 1;
            pointer-events: none;
            mix-blend-mode: overlay;
        }

        .ambient-glow {
            position: fixed;
            top: 50%; left: 50%;
            width: 80vw; height: 80vh;
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            opacity: 0.15;
            z-index: 0;
            pointer-events: none;
        }

        /* =========================================
           CUSTOM BACKGROUND LAYER (FIXED)
           ========================================= */
        #customBgLayer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            
            /* FIXED Z-INDEX and BLUR */
            z-index: 1; 
            opacity: 1; 
            filter: brightness(0.5) blur(8px); 

            display: none; 
            transition: background-image 0.5s ease;
        }

        /* =========================================
           UPDATED SIDEBAR & DOCK SYSTEM
           ========================================= */
        
        #appWrapper {
            display: flex;
            width: 100%;
            height: 100vh;
            position: relative;
            z-index: 10;
            transition: all 0.5s ease;
        }

        /* Base Sidebar Style */
        .sidebar-rail {
            background: var(--glass-base);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: flex-start; /* Fixes gap spacing */
            z-index: 100;
            transition: all 0.5s ease;
            gap: 15px; /* Consistent gap between icons */
            flex-shrink: 0;
        }

        .brand-icon {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            overflow: hidden;
            margin-bottom: 0;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 20px rgba(0,0,0,0.5); 
        }

        .brand-icon:hover { transform: scale(1.1) rotate(10deg); }
        .brand-icon img { width: 100%; height: 100%; object-fit: cover; }

        .nav-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-item {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--text-muted);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .nav-item:hover {
            background: var(--glass-highlight);
            color: var(--text-main);
        }

        .nav-item.active-nav {
            color: var(--accent-primary);
            background: rgba(124, 58, 237, 0.1);
        }

        .nav-item[data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            background: #000;
            color: #fff;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            animation: fadeIn 0.3s forwards;
            z-index: 200;
        }

        /* --- DOCK POSITIONING VARIANTS --- */

        /* Position: LEFT (Default) */
        #appWrapper.pos-left { flex-direction: row; }
        #appWrapper.pos-left .sidebar-rail {
            width: var(--sidebar-width);
            height: 100%;
            flex-direction: column;
            padding: 30px 0;
            border-right: 1px solid var(--glass-border);
        }
        #appWrapper.pos-left .nav-group { flex-direction: column; width: 100%; }
        #appWrapper.pos-left .brand-icon { margin-bottom: 20px; }
        #appWrapper.pos-left .nav-spacer { margin-top: auto; }
        #appWrapper.pos-left .nav-item[data-tooltip]:hover::after { left: 60px; top: 10px; }

        /* Position: RIGHT */
        #appWrapper.pos-right { flex-direction: row-reverse; }
        #appWrapper.pos-right .sidebar-rail {
            width: var(--sidebar-width);
            height: 100%;
            flex-direction: column;
            padding: 30px 0;
            border-left: 1px solid var(--glass-border);
        }
        #appWrapper.pos-right .nav-group { flex-direction: column; width: 100%; }
        #appWrapper.pos-right .brand-icon { margin-bottom: 20px; }
        #appWrapper.pos-right .nav-spacer { margin-top: auto; }
        #appWrapper.pos-right .nav-item[data-tooltip]:hover::after { right: 60px; top: 10px; }

        /* Position: BOTTOM (Taskbar) */
        #appWrapper.pos-bottom { flex-direction: column-reverse; }
        #appWrapper.pos-bottom .sidebar-rail {
            width: 100%;
            height: var(--sidebar-width);
            flex-direction: row;
            padding: 0 30px;
            border-top: 1px solid var(--glass-border);
        }
        #appWrapper.pos-bottom .nav-group { flex-direction: row; width: auto; }
        #appWrapper.pos-bottom .brand-icon { margin-bottom: 0; margin-right: 20px; }
        #appWrapper.pos-bottom .nav-spacer { margin-top: 0; margin-left: auto; }
        #appWrapper.pos-bottom .nav-item[data-tooltip]:hover::after { bottom: 60px; left: 50%; transform: translateX(-50%); }

        /* Position: TOP */
        #appWrapper.pos-top { flex-direction: column; }
        #appWrapper.pos-top .sidebar-rail {
            width: 100%;
            height: var(--sidebar-width);
            flex-direction: row;
            padding: 0 30px;
            border-bottom: 1px solid var(--glass-border);
        }
        #appWrapper.pos-top .nav-group { flex-direction: row; width: auto; }
        #appWrapper.pos-top .brand-icon { margin-bottom: 0; margin-right: 20px; }
        #appWrapper.pos-top .nav-spacer { margin-top: 0; margin-left: auto; }
        #appWrapper.pos-top .nav-item[data-tooltip]:hover::after { top: 60px; left: 50%; transform: translateX(-50%); }


        /* =========================================
           MAIN CONTENT AREA
           ========================================= */

        .main-stage {
            flex-grow: 1;
            position: relative;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
            height: 100%;
        }

        /* HERO VIEW */
        #view-home {
            min-height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: none;
        }
        #view-home.active { display: flex; opacity: 1; }

        .hero-title {
            font-family: var(--font-display);
            font-size: 8rem;
            font-weight: 900;
            line-height: 0.9;
            text-align: center;
            background: linear-gradient(180deg, #fff 0%, var(--text-muted) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 30px rgba(255,255,255,0.1));
        }

        .hero-version {
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            color: var(--accent-primary);
            margin-bottom: 80px;
            font-weight: 700;
        }

        .quick-actions {
            display: flex;
            gap: 30px;
        }

        .action-card {
            width: 220px;
            height: 280px;
            background: var(--glass-base);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .action-card:hover {
            transform: translateY(-10px) scale(1.05);
            background: linear-gradient(145deg, var(--glass-highlight), transparent);
        }

        .ac-icon { font-size: 4rem; margin-bottom: 20px; }
        .ac-label { font-weight: 700; font-family: var(--font-display); font-size: 1.2rem; }

        /* GAMES VIEW */
        #view-games {
            padding: 50px 60px;
            max-width: 2400px;
            margin: 0 auto;
            display: none;
            animation: slideUp 0.6s ease;
        }
        #view-games.active { display: block; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }

        .view-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
        }

        .vh-title { font-family: var(--font-display); font-size: 3.5rem; font-weight: 800; margin: 0; }
        
        .vh-pill {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            padding: 10px 20px;
            border-radius: 100px;
            font-weight: 600;
            color: var(--accent-primary);
        }

        /* GLOSS SEARCH */
        .search-bar-ui {
            background: var(--glass-base);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 10px;
            display: flex;
            gap: 15px;
            margin-bottom: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(15px);
        }

        .sb-input {
            flex-grow: 1;
            background: transparent;
            border: none;
            color: var(--text-main);
            font-size: 1.2rem;
            padding: 15px 20px;
            font-family: var(--font-body);
        }
        
        .sb-btn {
            background: var(--accent-primary);
            color: #fff;
            border: none;
            padding: 0 40px;
            border-radius: 14px;
            font-weight: 700;
            font-family: var(--font-display);
            text-transform: uppercase;
            cursor: pointer;
            transition: 0.3s;
        }
        .sb-btn:hover { background: var(--accent-secondary); transform: scale(1.02); }

        /* GRID SYSTEM */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
            gap: 20px;
            padding-bottom: 250px;
            perspective: 1000px;
        }

        /* 3D CARD STYLES */
        .game-card {
            aspect-ratio: 1 / 1;
            background: var(--glass-base);
            border-radius: 24px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            border-bottom: 6px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            transform-style: preserve-3d;
        }

        .game-card img {
            width: 100%; height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            filter: brightness(0.9);
        }

        .gc-info {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            transform: translateY(100%);
            transition: transform 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            z-index: 10;
        }

        .gc-title { font-weight: 700; font-size: 0.95rem; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }

        .game-card:hover {
            z-index: 5;
            transform: translateY(-12px) scale(1.02);
        }
        
        .game-card:hover img { 
            transform: scale(1.1); 
            filter: brightness(1.1);
        }
        .game-card:hover .gc-info { transform: translateY(0); }

        .heart-toggle {
            font-size: 1.2rem;
            opacity: 0.7;
            transition: 0.2s;
        }
        .heart-toggle:hover { opacity: 1; transform: scale(1.3); color: #ec4899; }
        .heart-toggle.active { color: #ec4899; opacity: 1; }

        /* FAVORITES SECTION */
        #favSection { display: none; margin-bottom: 60px; }
        .section-label { 
            font-family: var(--font-display); 
            text-transform: uppercase; 
            letter-spacing: 2px; 
            margin-bottom: 25px; 
            color: var(--accent-primary);
            font-size: 1.2rem;
            border-bottom: 2px solid var(--glass-border);
            padding-bottom: 10px;
            display: inline-block;
        }

        /* =========================================
           MODALS (GLOSSY DIALOGS)
           ========================================= */
        
        .modal-wrap {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(20px);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .gloss-modal {
            background: #0f1014;
            border: 1px solid rgba(255,255,255,0.1);
            width: 100%;
            max-width: 550px;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 40px 80px rgba(0,0,0,0.6);
            position: relative;
            transform: scale(0.95);
            animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes scaleIn { to { transform: scale(1); } }

        .gm-header {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .gm-header::before {
            content:''; width: 6px; height: 30px; background: var(--accent-primary); border-radius: 4px;
        }

        .form-row { margin-bottom: 20px; }
        .form-row label { display: block; margin-bottom: 10px; font-weight: 600; color: var(--text-muted); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }
        
        .input-glass {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: #fff;
            padding: 14px;
            border-radius: 12px;
            font-family: var(--font-body);
            transition: 0.3s;
        }
        
        .input-glass:focus { border-color: var(--accent-primary); background: rgba(255,255,255,0.08); }
        select.input-glass { appearance: none; cursor: pointer; }
        select.input-glass option { background: #000; }

        .gm-footer { display: flex; justify-content: flex-end; gap: 15px; margin-top: 40px; }
        
        .btn-act { padding: 12px 24px; border-radius: 12px; font-weight: 600; border: none; cursor: pointer; transition: 0.2s; }
        .btn-sec { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: var(--text-muted); }
        .btn-sec:hover { border-color: #fff; color: #fff; }
        .btn-pri { background: var(--accent-primary); color: #fff; }
        .btn-pri:hover { background: var(--accent-secondary); }
        .btn-dang { background: #ef4444; color: #fff; }

        /* =========================================
           OS SETTINGS MENU (REMASTERED)
           ========================================= */

        .gloss-modal.settings-modal {
            max-width: 800px;
            height: 500px;
            padding: 0;
            display: flex;
            overflow: hidden;
        }

        .os-settings-layout {
            display: flex;
            width: 100%;
            height: 100%;
        }

        .os-sidebar {
            width: 200px;
            background: rgba(255,255,255,0.03);
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .os-tab-btn {
            text-align: left;
            background: transparent;
            border: none;
            color: var(--text-muted);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: var(--font-body);
            font-weight: 600;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .os-tab-btn:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .os-tab-btn.active { background: var(--accent-primary); color: #fff; }

        .os-content-area {
            flex-grow: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .os-section { display: none; animation: fadeIn 0.3s ease; }
        .os-section.active { display: block; }

        .setting-item {
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .setting-label h4 { margin: 0 0 5px 0; font-size: 1rem; }
        .setting-label p { margin: 0; font-size: 0.8rem; color: var(--text-muted); }

        /* Custom File Upload Button */
        .file-upload-ui {
            display: inline-block;
            padding: 8px 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: 0.2s;
        }
        .file-upload-ui:hover { background: var(--accent-primary); }


        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent-primary); }

        /* =========================================
           IN-PAGE LAUNCHER
           ========================================= */
        #inPageLauncher {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: #000;
            z-index: 9999;
            display: none;
            flex-direction: column;
        }
        
        .ipl-bar {
            height: 50px;
            background: var(--glass-base);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
            backdrop-filter: blur(15px);
        }

        .ipl-back-btn {
            background: var(--accent-primary);
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-family: var(--font-display);
        }
        .ipl-back-btn:hover { background: var(--accent-secondary); }

        #inPageFrame {
            flex-grow: 1;
            width: 100%;
            border: none;
            background: #fff;
        }

    </style>
</head>
<body class="enable-glow">

    <div id="customBgLayer"></div>
    
    <div class="ui-noise"></div>
    <div class="ambient-glow"></div>
    <canvas id="bgCanvas"></canvas>

    <div id="inPageLauncher">
        <div class="ipl-bar">
            <div style="font-weight:bold; color:var(--text-main);">CRUNCH ARCADE</div>
            <button class="ipl-back-btn" onclick="closeInPageGame()">‚¨Ö Exit Game</button>
        </div>
        <iframe id="inPageFrame" src=""></iframe>
    </div>

    <div id="appWrapper" class="pos-left">
        
        <nav class="sidebar-rail">
            <div class="brand-icon" onclick="showHomeView()" title="Home">
                <img src="images/crunchicon.png" alt="logo">
            </div>

            <div class="nav-group">
                <div class="nav-item" onclick="showGamesView()" data-tooltip="Game Library">
                    <span>üéÆ</span>
                </div>
                <div class="nav-item" onclick="launchGame('os/cos.html')" data-tooltip="Crunch OS">
                    <span>üíª</span>
                </div>
                <div class="nav-item" onclick="showProxyWarning('https://login-withclever-public.nfilatova.ru')" data-tooltip="Web Proxy">
                    <span>üåê</span>
                </div>
                <div class="nav-item" onclick="launchGame('ytbypass/crunchytbypass.html')" data-tooltip="youtube bypass.">
                    <span>üì∫</span>
                </div>				
            </div>

            <div class="nav-group nav-spacer">
                <div class="nav-item" onclick="toggleOverlay('logOverlay')" data-tooltip="Updates">
                    <span>üìã</span>
                </div>
                <div class="nav-item" onclick="toggleOverlay('suggestOverlay')" data-tooltip="Feedback">
                    <span>üí°</span>
                </div>
                <div class="nav-item" onclick="toggleOverlay('settingsOverlay')" data-tooltip="Settings">
                    <span>‚öôÔ∏è</span>
                </div>
                <div class="nav-item" onclick="stealthMode()" style="color: #ef4444;" data-tooltip="PANIC CLOAK">
                    <span>‚úñ</span>
                </div>
            </div>
        </nav>

        <main class="main-stage">
            
            <section id="view-home" class="active">
                <h1 class="hero-title">CRUNCH<br>ARCADE</h1>
                <div class="hero-version">V1.3</div>
                
                <div class="quick-actions">
                    <div class="action-card" onclick="showGamesView()">
                        <div class="ac-icon">üïπÔ∏è</div>
                        <div class="ac-label">Games</div>
                    </div>
                    <div class="action-card" onclick="showProxyWarning('https://login-withclever-public.nfilatova.ru')">
                        <div class="ac-icon">üåê</div>
                        <div class="ac-label">Proxy</div>
                    </div>
                    <div class="action-card" onclick="launchGame('os/cos.html')">
                        <div class="ac-icon">üñ•Ô∏è</div>
                        <div class="ac-label">crunch os</div>
                    </div>
                </div>
            </section>

            <section id="view-games">
                <div class="view-header">
                    <h2 class="vh-title">Games</h2>
                    <div class="vh-pill" id="gameCounter">Loading...</div>
                </div>

                <div class="search-bar-ui">
                    <input type="text" class="sb-input" id="gameSearch" placeholder="Find your game..." onkeyup="searchGames()">
                    <button class="sb-btn" onclick="playRandomGame()">Random üé≤</button>
                </div>

                <div id="favSection">
                    <div class="section-label">Your Favorites</div>
                    <div class="games-grid" id="favGrid"></div>
                </div>

                <div class="games-grid" id="gameGrid">
                    <div class="game-card" onclick="launchGame('games/BESTGAMEEVER.html')">
                        <img src="images/10outta10game.png" loading="lazy">
                        <div class="gc-info">
                            <span class="gc-title">STEAL A BRAINROT (10/10)</span>
                            <span class="heart-toggle" onclick="toggleFav(event, this, 'STEAL A BRAINROT (10/10)')">‚ù§</span>
                        </div>
                    </div>

                    <div class="game-card" onclick="launchGame('games/snake.html')">
                        <img src="images/snake.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Snake</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Snake')">‚ù§</span></div>
                    </div>

                    <div class="game-card" onclick="launchGame('https://sonic-mania-firebase-port.web.app')">
                        <img src="https://media.wired.com/photos/59959e1936f7ad2c225a9620/1:1/w_1281,h_1281,c_limit/Sonic_Mania_Key_HP.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Sonic Mania</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Sonic Mania')">‚ù§</span></div>
                    </div>

                    <div class="game-card" onclick="launchGame('games/subwaysurfers.html')">
                        <img src="https://is1-ssl.mzstatic.com/image/thumb/Music221/v4/de/5b/45/de5b45e8-9600-89df-9dd1-19db35ffcdec/7321170849491.png/800x800cc.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Subway Surfers</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Subway Surfers')">‚ù§</span></div>
                    </div>

                    <div class="game-card" onclick="launchGame('games/basketballstars.html')">
                        <img src="images/subwaysurfers.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Basketball Stars</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Basketball Stars')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/crossyr.html')">
                        <img src="images/cror.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Crossy Road</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Crossy Road')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Crossy-Road/index.html')">
                        <img src="images/cror.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Crossy Road (Alt)</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Crossy Road (Alt)')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/gd.html')">
                        <img src="images/gd.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Geometry Dash</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Geometry Dash')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/retrobowl.html')">
                        <img src="images/rb.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Retrobowl</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Retrobowl')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/slitherio.html')">
                        <img src="images/sio.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Slither.IO</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Slither.IO')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/stickmanhook.html')">
                        <img src="images/smh.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Stickman Hook</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Stickman Hook')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/angrybirds.html')">
                        <img src="images/ab.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Angry Birds</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Angry Birds')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/slope.html')">
                        <img src="images/slope.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Slope</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Slope')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/bloonstds3.html')">
                        <img src="images/bltd3.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bloons TD3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Bloons TD3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/templerun2.html')">
                        <img src="images/tr2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Temple Run 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Temple Run 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/clusterrush.html')">
                        <img src="images/cr.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Cluster Rush</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Cluster Rush')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/bitlife.html')">
                        <img src="images/bll.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bitlife</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Bitlife')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/deltarune.html')">
                        <img src="images/ud.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Deltarune</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Deltarune')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/1v1lol.html')">
                        <img src="images/1v1lol.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">1v1.lol</span><span class="heart-toggle" onclick="toggleFav(event, this, '1v1.lol')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fnaf2.html')">
                        <img src="images/fnaf2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fnaf 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fnaf 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fnaf3.html')">
                        <img src="images/fnaf3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fnaf 3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fnaf 3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fnaf4.html')">
                        <img src="images/fnaf4.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fnaf 4</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fnaf 4')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/FnafUNC.html')">
                        <img src="images/fnafunc.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fnaf UNC</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fnaf UNC')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/FNaF.html')">
                        <img src="images/fnaf.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fnaf</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fnaf')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/FNF.html')">
                        <img src="images/fnf.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Friday Night Funkin</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Friday Night Funkin')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/slowroads.html')">
                        <img src="images/sr.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Slow Roads</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Slow Roads')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/undertaley.html')">
                        <img src="images/udy.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Undertale Yellow</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Undertale Yellow')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mc188.html')">
                        <img src="images/mc.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Minecraft (1.8.8)</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Minecraft (1.8.8)')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mc173.html')">
                        <img src="images/mc.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Minecraft (Beta 1.7.3)</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Minecraft (Beta 1.7.3)')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/snowrider.html')">
                        <img src="images/snowrider.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Snow Rider 3D</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Snow Rider 3D')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/run3.html')">
                        <img src="images/run3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Run 3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Run 3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ragdollarchers.html')">
                        <img src="images/ragdollarchers.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Ragdoll Archers</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Ragdoll Archers')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/escaperoad.html')">
                        <img src="images/escaperoad.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Escape Road</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Escape Road')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/doom.html')">
                        <img src="images/doom.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">DOOM</span><span class="heart-toggle" onclick="toggleFav(event, this, 'DOOM')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ovo.html')">
                        <img src="images/ovo.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">OVO</span><span class="heart-toggle" onclick="toggleFav(event, this, 'OVO')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/cc3.html')">
                        <img src="images/cc3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Crazy Cattle 3D</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Crazy Cattle 3D')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/rsd.html')">
                        <img src="images/rsd.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Rocket Soccer Derby</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Rocket Soccer Derby')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/skis.html')">
                        <img src="images/skis.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Skibidi Shooter</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Skibidi Shooter')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/smk.html')">
                        <img src="images/smk.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Smash Karts</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Smash Karts')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fallout.html')">
                        <img src="images/fallout.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fallout</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fallout')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/buildnowgg.html')">
                        <img src="images/buildnowgg.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Buildnow.gg</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Buildnow.gg')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ddcr.html')">
                        <img src="images/ddcr.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Derby Crashout Racing</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Derby Crashout Racing')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Doge-Miner/index.html')">
                        <img src="images/dm.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Doge Miner</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Doge Miner')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/cookieclicker.html')">
                        <img src="images/ccl.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Cookie Clicker</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Cookie Clicker')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/baldibasics.html')">
                        <img src="images/bbr.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Baldi Basics</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Baldi Basics')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/polytrack.html')">
                        <img src="images/polytrack.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Poly Track</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Poly Track')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/halflife.html')">
                        <img src="images/halflife.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Half-Life</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Half-Life')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://cuphead-firebase-port.firebaseapp.com')">
                        <img src="images/cuphead.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Cuphead</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Cuphead')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://bendy-firebase-port.firebaseapp.com')">
                        <img src="images/bendy.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bendy</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Bendy')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/stickmina.html')">
                        <img src="images/stickmina.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Henry Stickmin Airship</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Henry Stickmin Airship')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/stickmind.html')">
                        <img src="images/stickmind.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Henry Stickmin Steal the Diamond</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Henry Stickmin Steal the Diamond')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/stickminb.html')">
                        <img src="images/stickminb.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Henry Stickmin Breaking the Bank</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Henry Stickmin Breaking the Bank')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/stickminesp.html')">
                        <img src="images/stickminesp.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Henry Stickmin Escape the Prison</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Henry Stickmin Escape the Prison')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/jetpackjoyride.html')">
                        <img src="images/jetpackjoyride.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Jetpack Joy Ride</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Jetpack Joy Ride')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/osu.html')">
                        <img src="images/osu.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">OSU!</span><span class="heart-toggle" onclick="toggleFav(event, this, 'OSU!')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/pvz.html')">
                        <img src="images/pvz.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Plants VS Zombies</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Plants VS Zombies')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/happywheels.html')">
                        <img src="images/happywheels.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Happy Wheels</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Happy Wheels')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/badparenting.html')">
                        <img src="images/badparenting.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bad Parenting</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Bad Parenting')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fruitninja.html')">
                        <img src="images/fruitninja.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fruit Ninja</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fruit Ninja')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/granny.html')">
                        <img src="images/granny.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Granny</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Granny')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mariokart64.html')">
                        <img src="images/mariokart64.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Mario Kart 64</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Mario Kart 64')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/nbalive2000.html')">
                        <img src="images/nbalive2000.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">NBA Live 2000</span><span class="heart-toggle" onclick="toggleFav(event, this, 'NBA Live 2000')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/papermario.html')">
                        <img src="images/papermario.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Paper Mario</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Paper Mario')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/sm64.html')">
                        <img src="images/sm64.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Super Mario 64</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Super Mario 64')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/footballbros.html')">
                        <img src="images/footballbros.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Football Bros</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Football Bros')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/nfl2002.html')">
                        <img src="images/nfl2002.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Maddenn NFL 2002</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Maddenn NFL 2002')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Sonic.html')">
                        <img src="images/sonic.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Sonic</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Sonic')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Sonic2.html')">
                        <img src="images/sonic2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Sonic 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Sonic 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Sonic3.html')">
                        <img src="images/sonic3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Sonic 3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Sonic 3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/sandboxels.html')">
                        <img src="images/sandboxels.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Sandboxels</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Sandboxels')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/infinitecraft.html')">
                        <img src="images/infinitecraft.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Infinite Craft</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Infinite Craft')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/riddlems.html')">
                        <img src="images/riddlems.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Riddle Middle School</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Riddle Middle School')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/madstuntc2.html')">
                        <img src="images/stuntcars2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Mad Stunt Cars 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Mad Stunt Cars 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/jetskiracing.html')">
                        <img src="images/jsrace.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Jet Ski Racing</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Jet Ski Racing')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/dino.html')">
                        <img src="images/dino.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Google Dino Game</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Google Dino Game')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/dokidoki.html')">
                        <img src="images/dokiew.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Doki Doki Literature Club</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Doki Doki Literature Club')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/driftboss.html')">
                        <img src="images/driftboss.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Drift Boss</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Drift Boss')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/drifthunters.html')">
                        <img src="images/drifthunters.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Drift Hunters</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Drift Hunters')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/basketballlegends.html')">
                        <img src="images/basketballlegnds.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Basketball Legends</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Basketball Legends')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/bfdibranches.html')">
                        <img src="images/bfb.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">BFDI: Branches</span><span class="heart-toggle" onclick="toggleFav(event, this, 'BFDI: Branches')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/2048.html')">
                        <img src="images/2048.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">2048</span><span class="heart-toggle" onclick="toggleFav(event, this, '2048')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ducklife.html')">
                        <img src="images/ducklife2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Duck Life</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Duck Life')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/parappatherapper.html')">
                        <img src="images/ptr.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Parappa The Rapper</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Parappa The Rapper')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/residentevil.html')">
                        <img src="images/rse.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Resident Evil</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Resident Evil')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://angrybirds-firebaseport.firebaseapp.com')">
                        <img src="images/abr.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">AngryBirds Remastered</span><span class="heart-toggle" onclick="toggleFav(event, this, 'AngryBirds Remastered')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://scrapmetal3-firebase-port.firebaseapp.com')">
                        <img src="images/sm3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Scrap Metal 3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Scrap Metal 3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/wordle.html')">
                        <img src="images/wordle.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Wordle</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Wordle')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/indev.html')">
                        <img src="images/indev.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Minecraft Indev</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Minecraft Indev')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/hobo.html')">
                        <img src="images/hobo.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Hobo</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Hobo')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/grant2.html')">
                        <img src="images/gt2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Gran Turismo 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Gran Turismo 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/dk64.html')">
                        <img src="images/dk64.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Donkey Kong 64</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Donkey Kong 64')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/zmm.html')">
                        <img src="images/zmm.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Zelda: Majora's Mask</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Zelda: Majora\'s Mask')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/pizzatower.html')">
                        <img src="images/pzt.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Pizza Tower</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Pizza Tower')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/amongus.html')">
                        <img src="images/amgus.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Among Us</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Among Us')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/baconmaydie.html')">
                        <img src="images/bmd.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bacon May Die</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Bacon May Die')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/basketballfrvr.html')">
                        <img src="images/bfv.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Basketball (FRVR)</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Basketball (FRVR)')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/maskedforcesunlimited.html')">
                        <img src="images/mfu.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Masked Forces: Unlimited</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Masked Forces: Unlimited')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/moto3xm.html')">
                        <img src="images/m3mm.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Moto 3XM</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Moto 3XM: ?')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/motox3mpoolparty.html')">
                        <img src="images/m3mp.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Moto 3XM: Pool Party</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Moto 3XM: Pool Party')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/moto3xmspookyland.html')">
                        <img src="images/m3ms.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Moto 3XM: Spooky</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Moto 3XM: Spooky')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/moto3xmm.html')">
                        <img src="images/m3m.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Moto 3XM: Winter</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Moto 3XM: Winter')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ovo2.html')">
                        <img src="images/ovo2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">OVO 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'OVO 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/paperio.html')">
                        <img src="images/paperio.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Paper.io</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Paper.io')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/melonplayground.html')">
                        <img src="images/mp.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Melon Playground</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Melon Playground')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://repo-fired-baseit.firebaseapp.com')">
                        <img src="images/repo.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">R.E.P.O</span><span class="heart-toggle" onclick="toggleFav(event, this, 'R.E.P.O')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/aquaparkio.html')">
                        <img src="images/aquaparkio.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Aqua Park.io</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Aqua Park.io')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/asmallworldcup.html')">
                        <img src="images/asmwc.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">A Small World Cup</span><span class="heart-toggle" onclick="toggleFav(event, this, 'A Small World Cup')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/badbodyguards.html')">
                        <img src="images/badbg.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bad Bodyguards</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Bad Bodyguards')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/basketslamdunk2.html')">
                        <img src="images/bbsd.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Basket Ball Slam Dunk 2</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Basket Ball Slam Dunk 2')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/blockblast.html')">
                        <img src="images/blockblast.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Block Blast</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Block Blast')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Brawlstars.html')">
                        <img src="images/brawlstairs.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Brawl Stars</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Brawl Stars')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/clashofvikings.html')">
                        <img src="images/clashov.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Clash of Vikings</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Clash of Vikings')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/civiballs.html')">
                        <img src="images/civiball.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Civi Balls</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Civi Balls')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/carcrash3.html')">
                        <img src="images/mp.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Car Crash Simulator 3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Car Crash Simulator 3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/crazymotorcycle.html')">
                        <img src="images/crazym.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Crazy Motorcycle</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Crazy Motorcycle')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/cuttr.html')">
                        <img src="images/cuttr.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Cut the Rope</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Cut the Rope')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/drivemad.html')">
                        <img src="images/drivemad.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Drive Mad</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Drive Mad')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fnafpizzas.html')">
                        <img src="images/fnafpizzas.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Fnaf Pizzzeria Sim</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Fnaf Pizzzeria Sim')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/fnafsister.html')">
                        <img src="images/fnafsister.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">FNAF Sister Location</span><span class="heart-toggle" onclick="toggleFav(event, this, 'FNAF Sister Location')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/highwayracer.html')">
                        <img src="images/highwayracer.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Highway Racer</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Highway Racer')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mrracer.html')">
                        <img src="images/mrracer.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Mr Racer</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Mr Racer')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mytd.html')">
                        <img src="images/mytd.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">My Teardrop</span><span class="heart-toggle" onclick="toggleFav(event, this, 'My Teardrop')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/flappyb.html')">
                        <img src="images/flappyb.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Flappy Bird</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Flappy Bird')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/oret.html')">
                        <img src="images/oret.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Oregon Trail</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Oregon Trail')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/stumbleg.html')">
                        <img src="images/stumbleg.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Stumble Guys</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Stumble Guys')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://amandafireport.web.app')">
                        <img src="images/atg.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Amanda The Adventurer</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Amanda The Adventurer')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://gettingoverdih-fireport.web.app')">
                        <img src="images/goit.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Getting Over it</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Getting Over it')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://thatsnotmyneighbor-sdih.web.app')">
                        <img src="images/thatsnmn.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Thats not my Neighbor</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Thats not my Neighbor')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/bbbros.html')">
                        <img src="images/bbbros.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Baseball Bros</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Baseball Bros')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/baskbros.html')">
                        <img src="images/baskbros.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Basketball Bros</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Basketball Bros')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/basketrandom.html')">
                        <img src="images/basketballrandom.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Basketball Random</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Basketball Random')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/tombofthemask.html')">
                        <img src="images/tombofthemask.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Tomb Of The Mask</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Tomb Of The Mask')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/carkingarenea.html')">
                        <img src="images/carkingarenea.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Car King Arena</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Car King Arena')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/realflightsim.html')">
                        <img src="images/realflightsim.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Real Flight Sim</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Real Flight Sim')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/rbcol.html')">
                        <img src="images/rbcol.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Retrobowl College</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Retrobowl College')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/roofts.html')">
                        <img src="images/roofts.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Rooftop Sniper</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Rooftop Sniper')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/territorialio.html')">
                        <img src="images/territorialio.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Territorial.io</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Territorial.io')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/waterpoolio.html')">
                        <img src="images/waterpoolio.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Waterpool.io</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Waterpool.io')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/portal2d.html')">
                        <img src="images/portal2d.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Portal 2D</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Portal 2D')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/puppethockey.html')">
                        <img src="images/puppethockey.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Puppy Hockey</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Puppet Hockey')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ovo3.html')">
                        <img src="images/ovo3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">OvO 3</span><span class="heart-toggle" onclick="toggleFav(event, this, 'OvO 3')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mario.html')">
                        <img src="images/mario.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">NES Mario</span><span class="heart-toggle" onclick="toggleFav(event, this, 'NES Mario')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/FIFAS95.html')">
                        <img src="images/fifa95.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">FIFA Soccer 95</span><span class="heart-toggle" onclick="toggleFav(event, this, 'FIFA Soccer 95')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/NBAHangtime.html')">
                        <img src="images/nbaht.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">NBA Hangtime</span><span class="heart-toggle" onclick="toggleFav(event, this, 'NBA Hangtime')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/FIFA99.html')">
                        <img src="images/fifa99.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">FIFA 99</span><span class="heart-toggle" onclick="toggleFav(event, this, 'FIFA 99')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Doom65.html')">
                        <img src="images/Doom64.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Doom 64</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Doom 64')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/worldcup08.html')">
                        <img src="images/worldcup08.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">World Cup 98</span><span class="heart-toggle" onclick="toggleFav(event, this, 'World Cup 98')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/mortalk4.html')">
                        <img src="images/mortalk4.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Mortal Kombat 4</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Mortal Kombat 4')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/granny2.html')">
                        <img src="images/granny2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Granny 2</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/granny3.html')">
                        <img src="images/granny3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Granny 3</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/footballl.html')">
                        <img src="images/footballl.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Soccer Legends</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/escaper2.html')">
                        <img src="images/escaper2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Escape Road 2</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ducklifeb.html')">
                        <img src="images/ducklifeb.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Ducklife Battle</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/crazyc3d.html')">
                        <img src="images/crazyc3d.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Crazy Chicken 3D</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/bloon6.html')">
                        <img src="images/bloon6.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bloons TD6</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/bowm.html')">
                        <img src="images/bowm.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Bow Masters</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/blockydd.html')">
                        <img src="images/blockydd.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Blocky Demolition Derby</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/blockblast2.html')">
                        <img src="images/blockblast2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Block Blast 2</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/ballh/index.html')">
                        <img src="images/ballhop.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Ball Hop</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Stack/index.html')">
                        <img src="images/stack.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Stack</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Hextris/index.html')">
                        <img src="images/hextris.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Hextris</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/Hacker-Tetris/index.html')">
                        <img src="images/hackert.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Hacker Tetris</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/growag.html')">
                        <img src="images/growag.jpeg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Grow a Garden</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Grow a Garden')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('https://sonic-cd-firebase.web.app')">
                        <img src="images/soniccd.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Sonic CD</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Sonic CD')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/blackjack.html')">
                        <img src="images/blackjack.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Black Jack</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Black Jack')">‚ù§</span></div>
                    </div>
                    <div class="game-card" onclick="launchGame('games/deadfrontob.html')">
                        <img src="images/deadfrontob.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Dead Frontier Outbreak</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Dead Frontier Outbreak')">‚ù§</span></div>
                    </div>				
                    <div class="game-card" onclick="launchGame('games/gunmayhem.html')">
                        <img src="images/gunmayhem.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Gun Mayhem 1</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Gun Mayhem 1')">‚ù§</span></div>
                    </div>				
                    <div class="game-card" onclick="launchGame('games/pou.html')">
                        <img src="images/pou.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Pou</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Pou')">‚ù§</span></div>
                    </div>	
                    <div class="game-card" onclick="launchGame('games/crunchblox/index.html')">
                        <img src="images/crunchblox.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Crunchblox 2009</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Crunchblox 2009')">‚ù§</span></div>
                    </div>		
                    <div class="game-card" onclick="launchGame('games/learntf.html')">
                        <img src="images/learntf.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Learn to Fly</span></div>
                    </div>		
                    <div class="game-card" onclick="launchGame('games/learntf2.html')">
                        <img src="images/learntf2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Learn to Fly 2</span></div>
                    </div>					
                    <div class="game-card" onclick="launchGame('games/learntf3.html')">
                        <img src="images/learntf3.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Learn to Fly 3</span></div>
                    </div>					
                    <div class="game-card" onclick="launchGame('games/papalwba.html')">
                        <img src="images/papalwba.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Papa Louie: When Burgers Attck</span></div>
                    </div>			
                    <div class="game-card" onclick="launchGame('games/papalwpa.html')">
                        <img src="images/papalwpa.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Papa Louie: When Pizzas Attck</span></div>
                    </div>			
                    <div class="game-card" onclick="launchGame('games/wrestleb.html')">
                        <img src="images/wrestleb.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Wrestle Bros</span></div>
                    </div>				
                    <div class="game-card" onclick="launchGame('games/uno.html')">
                        <img src="images/uno.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Uno</span></div>
                    </div>				
                    <div class="game-card" onclick="launchGame('games/madskillsmotocross2.html')">
                        <img src="images/madskillsmotocross2.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Mad Skills Moto Cross 2</span></div>
                    </div>				
                    <div class="game-card" onclick="launchGame('games/kronkr.io.html')">
                        <img src="images/kronkr.io.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Kronkr.io</span></div>
                    </div>				
                    <div class="game-card" onclick="launchGame('games/gdsz.html')">
                        <img src="images/gdsz.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Geometry Dash: Sub Zero</span></div>
                    </div>		

                    <div class="game-card" onclick="launchGame('games/getawso.html')">
                        <img src="images/getawso.jpg" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Get Away Shootout</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Get Away Shootout')">‚ù§</span></div>
                    </div>	

                    <div class="game-card" onclick="launchGame('games/Terraria.html')">
                        <img src="images/terraria.png" loading="lazy">
                        <div class="gc-info"><span class="gc-title">Terraria 1.0</span><span class="heart-toggle" onclick="toggleFav(event, this, 'Terraria 1.0')">‚ù§</span></div>
                    </div>						

                </div> 
            </section>
        </main>
    </div>

    <div id="logOverlay" class="modal-wrap">
        <div class="gloss-modal">
            <div class="gm-header">Crunch Update bro</div>
            <div style="line-height: 1.6; color: var(--text-muted);">
                <p><strong style="color: var(--accent-primary);">v1.3</strong></p>
                <ul style="padding-left: 20px;">
                    <li>Added new launching methods, these patch up teachers who yknow, blocked aboutblanks like dumbasses lmao</li>
                    <li>In settings added more themes</li>	
                    <li>heads up btw, suggest stuff AT HOME or in the Proxy, because it doesnt work on the default site</li>
                    <li>btw i read some suggestions, tiktok and roblox. tiktok is in the proxies, roblox aint possible in a webbrowser</li>	
                    <li>Fixed some games that led to 404 (Fnaf UNC, Etc, report issues if this happens ofc)</li>						
                </ul>
                <div style="margin-top: 20px; display:flex; align-items:center; gap:10px;">
                    <input type="checkbox" id="dontShowChangelog">
                    <label for="dontShowChangelog">Don't show this again</label>
                </div>
            </div>
            <div class="gm-footer">
                <button class="btn-act btn-sec" onclick="toggleOverlay('logOverlay')">Dismiss</button>
                <button class="btn-act btn-pri" id="logCloseOk">Awesome</button>
            </div>
        </div>
    </div>

    <div id="suggestOverlay" class="modal-wrap">
        <div class="gloss-modal">
            <div class="gm-header">suggest</div>
            <div class="form-row">
                <label>Your Message (DO THIS ON A PROXY OR AT HOME)</label>
                <textarea id="suggestInput" class="input-glass" rows="4" placeholder="Request a game or report a bug..."></textarea>
            </div>
            <div class="gm-footer">
                <button class="btn-act btn-sec" onclick="toggleOverlay('suggestOverlay')">Cancel</button>
                <button class="btn-act btn-pri" id="sendSuggestBtn" onclick="sendSuggestion()">Submit</button>
            </div>
        </div>
    </div>

    <div id="settingsOverlay" class="modal-wrap">
        <div class="gloss-modal settings-modal">
            <div class="os-settings-layout">
                <div class="os-sidebar">
                    <div style="font-weight:800; font-size:1.2rem; margin-bottom:20px; padding-left:10px;">Settings</div>
                    <button class="os-tab-btn active" onclick="switchTab('tab-appearance')">design</button>
                    <button class="os-tab-btn" onclick="switchTab('tab-layout')">layout</button>
                    <button class="os-tab-btn" onclick="switchTab('tab-privacy')">cloaking/hiding tabs</button>
                    <button class="os-tab-btn" onclick="switchTab('tab-system')">save settings here ig?</button>
                </div>

                <div class="os-content-area">
                    
                    <div id="tab-appearance" class="os-section active">
                        <h2 class="gm-header">Themes</h2>
                        
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Theme Preset</h4>
                                <p>Choose your color palette</p>
                            </div>
                            <select id="themeSelect" class="input-glass" style="width:150px;" onchange="toggleThemeOptions()">
                                <option value="default">Default (Dark Mode)</option>
                                <option value="light">Light Mode</option>
                                <option value="gradient">Gradients</option>
                            </select>
                        </div>

                        <div id="gradientOptions" class="setting-item" style="display:none;">
                            <div class="setting-label">
                                <h4>Gradient Accent</h4>
                                <p>Select a uhhh gradient</p>
                            </div>
                            <select id="gradientSelect" class="input-glass" style="width:150px;">
                                <option value="midnight">Midnight Blue</option>
                                <option value="forest">Forest Green</option>
                                <option value="sunrise">Solar flare ig</option>
                                <option value="magma">Magma</option>
                                <option value="cyberpunk">Cyberpunk</option>
                                <option value="vaporwave">Vaporwave</option>
                                <option value="dracula">Dark mode but diff fr</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Custom Background</h4>
                                <p>Upload an image (overrides theme)</p>
                            </div>
                            <div>
                                <label for="bgUpload" class="file-upload-ui">üìÅ Upload</label>
                                <input type="file" id="bgUpload" accept="image/*" style="display:none;" onchange="handleBgUpload(this)">
                                <button class="file-upload-ui" style="margin-left:5px; background: #ef4444;" onclick="clearCustomBg()">‚úñ</button>
                            </div>
                        </div>
                    </div>

                    <div id="tab-layout" class="os-section">
                        <h2 class="gm-header">Interface</h2>
                        
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Sidebar Position</h4>
                                <p>Where should the navigation bar be?</p>
                            </div>
                            <select id="dockPos" class="input-glass" style="width:150px;" onchange="updateDockPosition()">
                                <option value="left">Left (Default)</option>
                                <option value="right">Right</option>
                                <option value="bottom">Bottom (Taskbar)</option>
                                <option value="top">Top</option>
                            </select>
                        </div>
                    </div>

                    <div id="tab-privacy" class="os-section">
                        <h2 class="gm-header">Stealth & Cloak</h2>
                        
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Tab Cloak</h4>
                                <p>Disguise tab as educational site</p>
                            </div>
                            <select id="cloakType" class="input-glass" style="width:150px;">
                                <option value="desmos">Desmos</option>
                                <option value="ixl">IXL Math</option>
                                <option value="schoology">Schoology</option>
                                <option value="clever">Clever</option>
                                <option value="studysync">StudySync</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Auto-Cloak on Startup</h4>
                                <p>Immediately hide when opening</p>
                            </div>
                            <select id="autoStealth" class="input-glass" style="width:150px;">
                                <option value="false">Disabled</option>
                                <option value="true">Enabled</option>
                            </select>
                        </div>

                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Launching games</h4>
                                <p>How games open</p>
                            </div>
                            <select id="launchMethod" class="input-glass" style="width:150px;">
                                <option value="aboutblank">About:Blank</option>
                                <option value="blob">Blob (New, better then abt:blanks)</option>
                                <option value="window">Open in a game/file link</option>
                                <option value="inpage">In crunch arcade's web.app</option>
                            </select>
                        </div>
                    </div>

                    <div id="tab-system" class="os-section">
                        <h2 class="gm-header">FPS Stuff</h2>
                        
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>Performance Mode</h4>
                                <p>Disable animations for battery life</p>
                            </div>
                            <select id="perfMode" class="input-glass" style="width:150px;" onchange="toggleOptimizer()">
                                <option value="false">HQ quality</option>
                                <option value="true">Shitty quality</option>
                            </select>
                        </div>
                        
                        <button class="btn-act btn-pri" style="width:100%; margin-top:20px;" onclick="saveSettings()">Save Configuration</button>
                        <button class="btn-act btn-sec" style="width:100%; margin-top:10px;" onclick="toggleOverlay('settingsOverlay')">Cancel</button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div id="proxyModal" class="modal-wrap">
        <div class="gloss-modal" style="border-color: #ef4444;">
            <div class="gm-header" style="color: #ef4444;">brotato watch out</div>
            <p style="color: #fff; margin-bottom: 20px;">ight so like u bout to open up a proxy, this won't show on ur history depending on ur settings BUT I'm not lieable for this, if you're caught and try to blame it on me it's your fault for using it.</p>
            <div class="gm-footer">
                <button class="btn-act btn-sec" onclick="closeProxyModal()">nvm im scared bro</button>
                <button class="btn-act btn-dang" id="proxyConfirmBtn">ok cool lemme use a proxy</button>
            </div>
        </div>
    </div>

<script>
    function showHomeView() {
        document.getElementById('view-games').classList.remove('active');
        setTimeout(() => {
            document.getElementById('view-games').style.display = 'none';
            document.getElementById('view-home').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('view-home').classList.add('active');
            }, 10);
        }, 300);
    }

    function showGamesView() {
        document.getElementById('view-home').classList.remove('active');
        setTimeout(() => {
            document.getElementById('view-home').style.display = 'none';
            document.getElementById('view-games').style.display = 'block';
            setTimeout(() => {
                document.getElementById('view-games').classList.add('active');
            }, 10);
        }, 300);
    }

    /* --- CANVAS BACKGROUND ANIMATION & PARTICLES --- */
    const canvas = document.getElementById('bgCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let particles = [];
    let particleColorBase = '124, 58, 237'; // Violet default
    let isOptimized = false; 

    function resize() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
    }

    /* UPDATED PARTICLE CLASS FOR SHAPES */
    class Particle {
        constructor() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.vx = (Math.random() - 0.5) * 0.4; 
            this.vy = (Math.random() - 0.5) * 0.4;
            this.size = Math.random() * 4 + 1; 
            
            // For Forest theme: Rotation properties
            this.angle = Math.random() * Math.PI * 2;
            this.spin = (Math.random() - 0.5) * 0.02;
            
            this.alpha = Math.random() * 0.4 + 0.1;
            this.updateColor();
        }

        updateColor() {
            this.color = `rgba(${particleColorBase}, ${this.alpha})`;
        }

        update() {
            this.x += this.vx;
            this.y += this.vy;
            this.angle += this.spin; // Rotate leaves/shapes

            if (this.x < 0) this.x = width;
            if (this.x > width) this.x = 0;
            if (this.y < 0) this.y = height;
            if (this.y > height) this.y = 0;
            
            // Re-sync color just in case theme changed
            this.color = `rgba(${particleColorBase}, ${this.alpha})`;
        }

        draw() {
            ctx.fillStyle = this.color;
            const theme = document.getElementById('themeSelect').value;
            const gradient = document.getElementById('gradientSelect').value;
            
            // 1. MAGMA THEME -> POLYGONS (Triangles)
            if (theme === 'gradient' && gradient === 'magma') {
                ctx.beginPath();
                const s = this.size * 2;
                // Simple triangle drawing
                ctx.moveTo(this.x, this.y - s);
                ctx.lineTo(this.x + s, this.y + s);
                ctx.lineTo(this.x - s, this.y + s);
                ctx.closePath();
                ctx.fill();
            }
            // 2. FOREST THEME -> LEAVES (Ellipses with rotation)
            else if (theme === 'gradient' && gradient === 'forest') {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle);
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size * 2, this.size, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
            // 3. DEFAULT -> BUBBLES
            else {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
    }

    function initParticles() {
        particles = [];
        const particleCount = Math.floor((width * height) / 14000); 
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }
    }

    function animate() {
        if (isOptimized) return; 

        ctx.clearRect(0, 0, width, height);
        particles.forEach(p => {
            p.update();
            p.draw();
        });
        requestAnimationFrame(animate);
    }

    /* --- OPTIMIZER LOGIC --- */
    function toggleOptimizer() {
        const val = document.getElementById('perfMode').value;
        const canvas = document.getElementById('bgCanvas');
        const noise = document.querySelector('.ui-noise');
        
        isOptimized = (val === 'true');
        
        if (isOptimized) {
            canvas.style.display = 'none';
            noise.style.display = 'none';
            document.body.classList.remove('enable-glow');
        } else {
            canvas.style.display = 'block';
            noise.style.display = 'block';
            document.body.classList.add('enable-glow');
            resize();
            initParticles();
            animate();
        }
        localStorage.setItem('crunchOptimizer', val);
    }

    window.addEventListener('resize', () => { resize(); initParticles(); });
    resize();
    initParticles();
    animate();

    /* --- THEME LOGIC --- */
    function toggleThemeOptions() {
        const theme = document.getElementById('themeSelect').value;
        const gradOpts = document.getElementById('gradientOptions');
        gradOpts.style.display = (theme === 'gradient') ? 'block' : 'none';
        applyTheme();
    }

    function applyTheme() {
        const theme = document.getElementById('themeSelect').value;
        const gradient = document.getElementById('gradientSelect').value;
        
        document.body.className = ''; // reset classes
        if(!isOptimized) document.body.classList.add('enable-glow');
        
        // Add layout positioning class back
        const currentDock = document.getElementById('dockPos').value || 'left';
        document.getElementById('appWrapper').classList.add('pos-' + currentDock);

        // Reset custom properties if using standard themes
        // (If a custom accent is active, it will be overridden unless re-applied, 
        // but typically user selecting a theme means they want to switch away from custom)
        
        if (theme === 'default') {
            particleColorBase = '124, 58, 237'; 
        } else if (theme === 'light') {
            document.body.classList.add('theme-light');
            particleColorBase = '37, 99, 235'; 
        } else if (theme === 'gradient') {
            document.body.classList.add('theme-' + gradient);
            switch(gradient) {
                case 'midnight': particleColorBase = '56, 189, 248'; break; 
                case 'forest': particleColorBase = '74, 222, 128'; break; 
                case 'sunrise': particleColorBase = '251, 146, 60'; break; 
                case 'magma': particleColorBase = '252, 165, 165'; break;
                case 'cyberpunk': particleColorBase = '234, 179, 8'; break;
                case 'vaporwave': particleColorBase = '217, 70, 239'; break;
                case 'dracula': particleColorBase = '168, 85, 247'; break;
                default: particleColorBase = '255, 255, 255';
            }
        }
        
        // If custom BG is still active, its colors might need to be cleared or re-applied logic
        // For now, if user clicks a preset theme, we assume they want that preset's colors.
        // But if custom BG image exists, we usually keep the image. 
        // To fully reset, user should use 'clearCustomBg'.
        
        initParticles(); 
    }

    /* --- NEW SETTINGS UI LOGIC --- */
    function switchTab(tabId) {
        // Hide all sections
        document.querySelectorAll('.os-section').forEach(el => el.classList.remove('active'));
        // Show target
        document.getElementById(tabId).classList.add('active');
        
        // Update sidebar buttons
        document.querySelectorAll('.os-tab-btn').forEach(btn => btn.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    function updateDockPosition() {
        const pos = document.getElementById('dockPos').value;
        const wrapper = document.getElementById('appWrapper');
        
        // Remove old classes
        wrapper.classList.remove('pos-left', 'pos-right', 'pos-bottom', 'pos-top');
        // Add new class
        wrapper.classList.add('pos-' + pos);
        
        // Re-calculate canvas size as layout changes
        setTimeout(resize, 500);
    }

    /* --- UPDATED CUSTOM BG LOGIC WITH COMPRESSION & ADAPTIVE COLOR --- */
    function handleBgUpload(input) {
        if (input.files && input.files[0]) {
            const file = input.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const img = new Image();
                img.src = e.target.result;

                img.onload = function() {
                    // 1. Resize for LocalStorage (max 1280px width, 0.7 quality)
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Calculate aspect ratio
                    let width = img.width;
                    let height = img.height;
                    const maxWidth = 1280;
                    const maxHeight = 720;

                    if (width > height) {
                        if (width > maxWidth) {
                            height *= maxWidth / width;
                            width = maxWidth;
                        }
                    } else {
                        if (height > maxHeight) {
                            width *= maxHeight / height;
                            height = maxHeight;
                        }
                    }

                    canvas.width = width;
                    canvas.height = height;
                    ctx.drawImage(img, 0, 0, width, height);

                    // Get Compressed Data URL
                    const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.7);

                    // 2. Extract Dominant Color for Adaptive Theme
                    // We'll sample the center area for the accent color
                    const colorCanvas = document.createElement('canvas');
                    const colorCtx = colorCanvas.getContext('2d');
                    colorCanvas.width = 1;
                    colorCanvas.height = 1;
                    colorCtx.drawImage(img, 0, 0, 1, 1); // Draw compressed image to 1x1 to get average
                    const p = colorCtx.getImageData(0, 0, 1, 1).data;
                    
                    const accentColor = `rgb(${p[0]}, ${p[1]}, ${p[2]})`;
                    const accentGlow = `rgba(${p[0]}, ${p[1]}, ${p[2]}, 0.6)`;

                    // 3. Apply & Save
                    applyCustomBg(compressedDataUrl);
                    applyAdaptiveTheme(accentColor, accentGlow);

                    try {
                        localStorage.setItem('customBg', compressedDataUrl);
                        localStorage.setItem('customAccent', accentColor);
                        localStorage.setItem('customGlow', accentGlow);
                    } catch (e) {
                        alert("Even compressed, image is too large for local storage! Consider a smaller image.");
                    }
                };
            };
            reader.readAsDataURL(file);
        }
    }

    function applyAdaptiveTheme(color, glow) {
        // Apply to CSS variables
        document.documentElement.style.setProperty('--accent-primary', color);
        document.documentElement.style.setProperty('--accent-glow', glow);
        
        // Update Particles
        const match = color.match(/\d+/g);
        if(match) {
            particleColorBase = `${match[0]}, ${match[1]}, ${match[2]}`;
            initParticles();
        }
    }

    /* --- FIXED CUSTOM BG FUNCTION --- 
       This version correctly hides the canvas bubbles and noise overlay
       when a custom background is active.
    */
    function applyCustomBg(dataUrl) {
        const layer = document.getElementById('customBgLayer');
        const canvas = document.getElementById('bgCanvas');
        const noise = document.querySelector('.ui-noise');
        const glow = document.querySelector('.ambient-glow');

        if (dataUrl) {
            // 1. Show the custom image layer
            layer.style.display = 'block';
            layer.style.backgroundImage = `url(${dataUrl})`;

            // 2. FORCE HIDE the bubbles and noise
            canvas.style.display = 'none';
            if(noise) noise.style.display = 'none';
            if(glow) glow.style.display = 'none';

        } else {
            // 1. Hide the custom image layer
            layer.style.display = 'none';

            // 2. Bring back bubbles (Only if performance mode is NOT on)
            const isOptimized = document.getElementById('perfMode').value === 'true';
            if (!isOptimized) {
                canvas.style.display = 'block';
                if(noise) noise.style.display = 'block';
                if(glow) glow.style.display = 'block';
                
                // Restart animation to be safe
                resize();
                initParticles(); 
            }
        }
    }

    function clearCustomBg() {
        localStorage.removeItem('customBg');
        localStorage.removeItem('customAccent');
        localStorage.removeItem('customGlow');
        applyCustomBg(null);
        
        // Reset CSS overrides
        document.documentElement.style.removeProperty('--accent-primary');
        document.documentElement.style.removeProperty('--accent-glow');
        
        // Re-apply current preset theme
        applyTheme();
        
        document.getElementById('bgUpload').value = "";
    }

    /* --- STEALTH & PROXY LOGIC --- */
    const cloakData = {
        ixl: { title: "IXL | Dashboard", icon: "https://www.ixl.com/favicon.ico" },
        schoology: { title: "Schoology | Courses", icon: "https://asset-cdn.schoology.com/sites/all/themes/schoology_theme/favicon.ico" },
        clever: { title: "Clever | Portal", icon: "https://assets.clever.com/favicon.ico" },
        desmos: { title: "Desmos | Graphing Calculator", icon: "https://www.desmos.com/assets/img/apps/graphing/favicon.ico" },
        studysync: { title: "StudySync - Assignments", icon: "https://apps.studysync.com/favicon-studysync.ico" },				
    };

    function toggleOverlay(id) {
        const overlay = document.getElementById(id);
        const isVisible = overlay.style.display === 'flex';
        overlay.style.display = isVisible ? 'none' : 'flex';
    }

    function closeProxyModal() {
        document.getElementById('proxyModal').style.display = 'none';
    }

    function applyCloak(targetWindow) {
        const choice = document.getElementById('cloakType').value;
        const data = cloakData[choice];
        try {
            targetWindow.document.title = data.title;
            const link = targetWindow.document.createElement('link');
            link.rel = 'icon';
            link.href = data.icon;
            targetWindow.document.head.appendChild(link);
        } catch (e) { console.warn('Could not apply cloak:', e); }
    }

    function stealthMode() {
        const win = window.open('about:blank', '_blank');
        applyCloak(win);
        const iframe = win.document.createElement('iframe');
        iframe.style = "width:100vw; height:100vh; border:none; position:fixed; top:0; left:0;";
        iframe.src = window.location.href;
        win.document.body.appendChild(iframe);
        window.location.replace("https://google.com");
    }

    function closeInPageGame() {
        document.getElementById('inPageLauncher').style.display = 'none';
        document.getElementById('inPageFrame').src = '';
    }

    async function launchGame(path) {
        let launchMethod = localStorage.getItem('launchMethod') || 'aboutblank';

        // 1. IN-PAGE LAUNCHER
        if (launchMethod === 'inpage') {
            const launcher = document.getElementById('inPageLauncher');
            const frame = document.getElementById('inPageFrame');
            launcher.style.display = 'flex';
            frame.src = path;
        }

        // 2. ABOUT BLANK
        else if (launchMethod === 'aboutblank') {
            const win = window.open('about:blank', '_blank');
            if (!win) return alert("Pop-up blocked! Please allow pop-ups to play.");
            applyCloak(win);
            const iframe = win.document.createElement('iframe');
            iframe.style = "width:100%; height:100%; border:none; position:fixed; top:0; left:0; margin:0; background: #000;";
            iframe.src = path;
            win.document.body.appendChild(iframe);
        } 
        
        // 3. BLOB INJECTION
        else if (launchMethod === 'blob') {
            if (path.startsWith('http')) {
                const htmlContent = `
                    <!DOCTYPE html>
                    <html style="width:100%;height:100%;">
                    <head><title>Loading...</title></head>
                    <body style="margin:0;overflow:hidden;background:#000;">
                        <iframe src="${path}" style="width:100vw; height:100vh; border:none;"></iframe>
                    </body>
                    </html>
                `;
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const blobUrl = URL.createObjectURL(blob);
                const win = window.open(blobUrl, '_blank');
                try { applyCloak(win); } catch(e) {}
            } else {
                try {
                    const response = await fetch(path);
                    if (!response.ok) throw new Error("Failed to load game file.");
                    
                    let code = await response.text();
                    
                    const link = document.createElement("a");
                    link.href = path; 
                    const fullPath = link.href; 
                    const basePath = fullPath.substring(0, fullPath.lastIndexOf('/') + 1);
                    
                    const baseTag = `<base href="${basePath}">`;
                    code = code.replace('<head>', '<head>' + baseTag);

                    const blob = new Blob([code], { type: 'text/html' });
                    const blobUrl = URL.createObjectURL(blob);
                    const win = window.open(blobUrl, '_blank');
                    try { applyCloak(win); } catch(e) {}
                } catch (err) {
                    alert("Blob Injection Failed: " + err.message + "\nFalling back to standard launch.");
                    window.open(path, '_blank');
                }
            }
        }
        
        // 4. STANDARD TAB
        else {
            const win = window.open(path, '_blank');
            if (!win) return alert("Pop-up blocked! Please allow pop-ups to play.");
            try { applyCloak(win); } catch (e) {}
        }
    }

    let _pendingProxyUrl = null;
    function showProxyWarning(url) {
        _pendingProxyUrl = url;
        document.getElementById('proxyModal').style.display = 'flex';
        
        document.getElementById('proxyConfirmBtn').onclick = () => {
            document.getElementById('proxyModal').style.display = 'none';
            if (_pendingProxyUrl) launchGame(_pendingProxyUrl);
            _pendingProxyUrl = null;
        };
    }

    /* --- GAME GRID UTILS --- */

    function playRandomGame() {
        const cards = document.querySelectorAll('#gameGrid .game-card');
        if (cards.length === 0) return;
        const randomIndex = Math.floor(Math.random() * cards.length);
        cards[randomIndex].click();
    }

    function searchGames() {
        let input = document.getElementById('gameSearch').value.toLowerCase();
        let cards = document.querySelectorAll('#gameGrid .game-card');
        
        for (let card of cards) {
            let label = card.querySelector('.gc-title').innerText.toLowerCase();
            card.style.display = label.includes(input) ? "block" : "none";
        }
        updateGameCount();
    }

    function toggleFav(event, btn, gameName) {
        event.stopPropagation();
        btn.classList.toggle('active');
        let favorites = JSON.parse(localStorage.getItem('crunchFavs') || "[]");
        
        if (btn.classList.contains('active')) {
            favorites.push(gameName);
        } else {
            favorites = favorites.filter(fav => fav !== gameName);
        }
        localStorage.setItem('crunchFavs', JSON.stringify(favorites));
        refreshFavorites();
    }

    /* --- SAVE SETTINGS (Updated) --- */
    function saveSettings() {
        // Core
        localStorage.setItem('autoStealth', document.getElementById('autoStealth').value);
        localStorage.setItem('cloakPref', document.getElementById('cloakType').value);
        localStorage.setItem('launchMethod', document.getElementById('launchMethod').value);
        
        // Visuals
        localStorage.setItem('themePref', document.getElementById('themeSelect').value);
        localStorage.setItem('gradientPref', document.getElementById('gradientSelect').value);
        
        // Layout
        const dockPos = document.getElementById('dockPos').value;
        localStorage.setItem('dockPos', dockPos);
        
        // Apply Changes
        updateDockPosition();
        toggleOptimizer();
        applyTheme();
        
        // If custom BG is active, re-apply its colors because applyTheme() might have reset them
        const customAccent = localStorage.getItem('customAccent');
        const customGlow = localStorage.getItem('customGlow');
        if (customAccent && customGlow) {
            applyAdaptiveTheme(customAccent, customGlow);
        }

        toggleOverlay('settingsOverlay');
    }

    function refreshFavorites() {
        const favSection = document.getElementById('favSection');
        const favGrid = document.getElementById('favGrid');
        const favorites = JSON.parse(localStorage.getItem('crunchFavs') || "[]");
        const allCards = document.querySelectorAll('#gameGrid .game-card');
        
        favGrid.innerHTML = '';
        
        if (favorites.length > 0) {
            favSection.style.display = 'block';
            allCards.forEach(card => {
                const label = card.querySelector('.gc-title').innerText;
                if (favorites.includes(label)) {
                    const clone = card.cloneNode(true);
                    clone.onclick = card.onclick;
                    clone.querySelector('.heart-toggle').onclick = (e) => toggleFav(e, card.querySelector('.heart-toggle'), label);
                    favGrid.appendChild(clone);
                }
            });
        } else {
            favSection.style.display = 'none';
        }
    }

    function updateGameCount() {
        const all = document.querySelectorAll('#gameGrid .game-card');
        let visible = 0;
        all.forEach(c => { if (c.style.display !== 'none') visible++; });
        document.getElementById('gameCounter').innerText = `${visible} Games`;
    }

    async function sendSuggestion() {
        const input = document.getElementById('suggestInput');
        const btn = document.getElementById('sendSuggestBtn');
        const suggestion = input.value.trim();

        if (!suggestion) return alert("Please type something first!");
        btn.innerText = "Transmitting...";
        btn.disabled = true;

        const webhookURL = "https://discord.com/api/webhooks/1466198860635570344/M1DflmAdLfMrZ69QrprWzYy_GDannMhnY6KsjPe5xXT6U2btwtcXdCLZeZDoLNwQdMT1";
        
        try {
            const response = await fetch(webhookURL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    embeds: [{
                        title: "Gloss UI Suggestion",
                        description: suggestion,
                        color: 12403181,
                        timestamp: new Date()
                    }]
                })
            });
            if (response.ok) {
                alert("Suggestion sent!");
                input.value = "";
                toggleOverlay('suggestOverlay');
            } else {
                alert("Error sending suggestion.");
            }
        } catch (error) {
            alert("Network error.");
        } finally {
            btn.innerText = "Transmit";
            btn.disabled = false;
        }
    }

    /* --- INITIALIZATION --- */
    window.onload = () => {
        // Init Stealth
        const isAutoStealth = localStorage.getItem('autoStealth') === 'true';
        const hasTriggered = sessionStorage.getItem('stealthTriggered');
        if (isAutoStealth && !hasTriggered) {
            sessionStorage.setItem('stealthTriggered', 'true');
            stealthMode();
        }

        // Load Settings
        if(localStorage.getItem('autoStealth')) document.getElementById('autoStealth').value = localStorage.getItem('autoStealth');
        if(localStorage.getItem('cloakPref')) document.getElementById('cloakType').value = localStorage.getItem('cloakPref');
        
        const savedLaunch = localStorage.getItem('launchMethod');
        if(savedLaunch) {
            document.getElementById('launchMethod').value = savedLaunch;
        }

        // Load Themes & Gradient
        const savedTheme = localStorage.getItem('themePref') || 'default';
        const savedGrad = localStorage.getItem('gradientPref') || 'midnight';
        document.getElementById('themeSelect').value = savedTheme;
        document.getElementById('gradientSelect').value = savedGrad;
        
        // Load Dock Position
        const savedDock = localStorage.getItem('dockPos') || 'left';
        document.getElementById('dockPos').value = savedDock;
        
        // Load Optimizer
        const savedOpt = localStorage.getItem('crunchOptimizer');
        if(savedOpt) {
            document.getElementById('perfMode').value = savedOpt;
            toggleOptimizer();
        }
        
        toggleThemeOptions(); // Sets standard themes

        // Load Custom BG & Adaptive Theme
        const savedBg = localStorage.getItem('customBg');
        const savedAccent = localStorage.getItem('customAccent');
        const savedGlow = localStorage.getItem('customGlow');
        
        if (savedBg) {
            applyCustomBg(savedBg);
            if (savedAccent && savedGlow) {
                applyAdaptiveTheme(savedAccent, savedGlow);
            }
        }
        
        updateDockPosition();

        // Load Favs
        let favorites = JSON.parse(localStorage.getItem('crunchFavs') || "[]");
        let cards = document.querySelectorAll('#gameGrid .game-card');
        for (let card of cards) {
            let label = card.querySelector('.gc-title').innerText;
            if (favorites.includes(label)) {
                card.querySelector('.heart-toggle').classList.add('active');
            }
        }
        
        updateGameCount();
        refreshFavorites();

        // Changelog
        const dontShow = localStorage.getItem('hideChangelog') === 'true';
        document.getElementById('dontShowChangelog').checked = dontShow;
        if (!dontShow) toggleOverlay('logOverlay');

        document.getElementById('logCloseOk').onclick = () => {
            const checked = document.getElementById('dontShowChangelog').checked;
            localStorage.setItem('hideChangelog', checked ? 'true' : 'false');
            toggleOverlay('logOverlay');
        };
    };
</script>

</body>
</html>